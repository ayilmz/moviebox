import type { NextPage } from 'next'
import Head from 'next/head'
import styles from '../styles/Home.module.css'
import Header from '../components/Header'
import HeroBanner from '../components/HeroBanner'
import MovieList from '../components/MovieList'

type HeroBannerType = {
    "title": string,
    "imdb": string,
    "rating": number,
    "description": string,
    "link": string
}

const Home: ({heroBanner}: { heroBanner: HeroBannerType }) => JSX.Element = ({heroBanner}) => {
  return (
    <div className={styles.container}>
      <Head>
        <title>MovieBox</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
          <link rel="preconnect" href="https://fonts.googleapis.com" />
          <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin='anonymous' />
          <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet"/>
      </Head>

        <Header />
        <HeroBanner heroBanner={heroBanner}/>
        <MovieList title="Featured Movie"/>
        <MovieList title="New Arrival"/>
        <br/><br/><br/><br/><br/><br/>
      <footer>

      </footer>
    </div>
  )
}

export async function getServerSideProps(context:any) {
    const res = await fetch(`http://www.flashtr.com/moviebox/api/data.json`)
    const { heroBanner } = await res.json()

    // Pass data to the page via props
    return { props: { heroBanner} }
}


export default Home
